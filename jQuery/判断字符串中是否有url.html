<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script>
    
    
    function httpString(s) {
        var reg = /(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g;
        //var reg = /^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;
        //var reg=/(http(s)?\:\/\/)?(www\.)?(\w+\:\d+)?(\/\w+)+\.(swf|gif|jpg|bmp|jpeg)/gi;
        //var reg=/(http(s)?\:\/\/)?(www\.)?(\w+\:\d+)?(\/\w+)+\.(swf|gif|jpg|bmp|jpeg)/gi;
        var reg= /(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g;
        //var reg= /^((ht|f)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-\.,@?^=%&:\/~\+#]*[\w\-\@?^=%&\/~\+#])?$/;
        //v = v.replace(reg, "<a href='$1$2'>$1$2</a>"); //这里的reg就是上面的正则表达式
        //s = s.replace(reg, "$1$2"); //这里的reg就是上面的正则表达式
        s = s.match(reg);
        console.log(s)
        return(s)
    }

    var t1 = '手机的饭卡手机的疯狂拉升金光华附近撒旦回复 http://ww骄傲深刻理解的疯狂升级啊对抗疗法。';
    var t2 = '手机的饭卡手机的疯狂拉https://www.xxx.com/升金光华附近撒旦回复 http:/w.xxx.com/mall/default.aspx骄傲深刻理解的疯狂升级啊对抗疗法。';
    var t3 = '手机的饭卡手机的疯狂https://www.xxx.com/我是谁/index.html拉升金光华附近撒旦回复http://www.xxx.com/mall/default.aspx?id=2骄傲深刻理解的疯狂升级啊对抗疗法。';
    var t4 = '手机的饭卡手机的疯狂拉升金光华附近撒旦回复 https://www.xxx.com/mall/mall32132/default.aspx?id=2骄傲深刻理解的疯狂升级啊对抗疗法。';
    var t5 = '为了庆祝与欧联一起走过的这1200多个日日夜夜，南通旗舰店历经一个多月的准备......http://sports.eastday.com/a/1710311d505585ss51000000.html ，二七区二额翁翁翁绕弯儿翁翁群若无群二';
    var add = 're=100';

    httpString(t1);
    httpString(t2);
    httpString(t3);
    httpString(t4);
    httpString(t5);
    httpString('http://sports.eastday.com/a/1710311d505585ss51000000.html');
    alert(httpString('SaaS大所大所多付http://localhost:63342/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/jQuery/%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E6%98%AF%E5%90%A6%E6%9C%89url.html?_ijt=ntrnbaei0frotrmh43mo4e9e63'));
    //httpString('手机的饭卡手机的疯狂拉升金光华附近撒旦回复');
    /*//链接添加后缀
    String.prototype.addParam = function(s){
        var re = /http:\/\/([^\/]+\/)+([^.]+\.aspx(\?[^=]+=\d+)?)?/gi,
            t = this;
        return t.replace(re, function($){
            return $ + ['?', '&'][$.indexOf('?') == -1 ?  0 : 1 ] + s;
        })
    };*/
    /*console.log( t1.addParam(add) );
    console.log( t2.addParam(add) );
    console.log( t3.addParam(add) );
    console.log( t4.addParam(add) );
*/

    /*function IsURL(str_url){
        var strRegex = "^((https|http|ftp|rtsp|mms)?://)"
            + "?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?" //ftp的user@
            + "(([0-9]{1,3}\.){3}[0-9]{1,3}" // IP形式的URL- 199.194.52.184
            + "|" // 允许IP和DOMAIN（域名）
            + "([0-9a-z_!~*'()-]+\.)*" // 域名- www.
            + "([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\." // 二级域名
            + "[a-z]{2,6})" // first level domain- .com or .museum
            + "(:[0-9]{1,4})?" // 端口- :80
            + "((/?)|" // a slash isn't required if there is no file name
            + "(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$";
        var re=new RegExp(strRegex);
        //re.test()
        if (re.test(str_url)){
            return (true);
        }else{
            return (false);
        }
    }
    var testUrl="http://harveyzeng.iteye.com/blog/1776991";
    //var testUrl="http://www.jb51.net/article/1.htm";
    alert(IsURL(testUrl));*/

    // 从字符串中提取url
    /*function matchUrl(str){
        res = str.replace(/((?:http:\/\/)(?:.[\w]+)+)/g,function(){
            if (/^http/.test(arguments[1]))
            {
                return "<a class='urlTag'" + " onclick=webPage('"+arguments[1]+"') "  +"href='javascript:void(0)'>"+arguments[1]+"</a>";
            } else {
                return "<a class='urlTag'" + " onclick=webPage('http://"+arguments[1]+"') " +"href='javascript:void(0)'>"+arguments[1]+"</a>";
            }
        });
        return res;
    }

    //console.log(matchUrl(t4))
    alert(matchUrl(t4))*/

    function stringVar(str) {
        return str.indexOf('{$') >= 0;
        //return new RegExp('{$').test(str);
    }

    console.log(stringVar('aeafsdf'))
    console.log(stringVar('{aeafsdf'))
    console.log(stringVar('a{e$afsdf'))
    console.log(stringVar('a{$afsdf'))

</script>
</body>
</html>